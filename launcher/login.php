<?php include_once("$_SERVER[DOCUMENT_ROOT]/weiw/index.php");


	$MKH = new mkh();
	$MKH ->mods('mc_launcher');
	$MKH ->mods('mc_check_auth');
?>
<!DOCTYPE html>
<html lang="zh-cmn-Hans">
	<head>
		<style>
			body {
				background-color: #0568C1;
				margin: 0;
			}
			header {
				text-align: center;
				font-size: 20px;
				color: #FFFFFF;
			}
			section {
				display: grid;
				grid-template-rows: 1fr auto 1fr;
				align-items: center;
				min-height: 100vh;
				padding: 0 50px;
				box-sizing: border-box;
			}
			h2 {
				margin: 0;
				text-align: center;
			}
			img {
				width: 100%;
			}
			form {
				margin: 20px 0;
			}
			form input {
				transition: border-color 0.3s ease;
				outline: none;
				margin-bottom: 15px;
				font-size: 16px;
				color: #999;
				text-align: left;
				padding: 15px 20px;
				width: 100%;
				line-height: 25px;
				display: inline-block;
				box-sizing: border-box;
				background: #f7fafc;
				border-radius: 36px;
				border: 1px solid #e5e5e5;
			}
			form input:focus {
				border-color: #0E6DC2;
			}
			form button {
				transition: background 0.3s ease;
				padding: 15px 20px;
				width: 100%;
				line-height: 25px;
				display: inline-block;
				color: #FFFFFF;
				cursor: pointer;
				background: #0568C1;
				border-radius: 36px;
				border: none;
			}
			form button:hover {
				background: #FDC500;
			}
			main {
				display: flex;
				justify-content: space-between;
				overflow: hidden;
				margin: 20px auto;
				max-width: 900px;
				min-height: 400px;
				background-color: #FFFFFF;
				border-radius: 8px;
			}
			.left-div {
				padding: 50px;
				box-sizing: border-box;
				width: 50%;
				background-color: #FFFFFF;
			}
			.right-div {
				padding: 40px;
				box-sizing: border-box;
				width: 50%;
				background-color: #F4F9FD;
				text-align: center;
				display: grid;
				align-items: center;
			}
			
			footer {
				color: white;
				text-align: center;
			}
			footer svg {
				width: 20px;
				height: 20px;
			}
			.footer-links {
				display: flex;
				justify-content: center;
				gap: 1rem;
				flex-wrap: wrap;
				margin-bottom: 1rem;
			}
			.footer-links a {
				display: inline-flex;
				align-items: center;
				gap: 5px;
				color: white;
				text-decoration: none;
				transition: opacity 0.3s;
			}
			.footer-links a:hover {
				opacity: 0.8;
			}
			.footer-links i {
				margin-right: 0.5rem;
			}
		</style>
		<title>登陆</title>
	</head>
	<body>
		<includes-header><?php include('includes/window-header.html') ?></includes-header>
		
		<section>
			<header id="error"></header>
			
			<main>
				<div class="left-div">
					<h2>登陆</h2>
					
					<form action="javascript:login(0)" method="get">
						<input onfocus="error()" id="name" type="text" placeholder="名称" title="请输入您的名称" required="" autofocus />
						<input onfocus="error()" id="password" type="password" title="请输入您的密码" placeholder="密码" required="" autofocus />
						<button class="btn" type="submit">登录</button>
					</form>
					
					<span>没有账号？那就<a href="register.php">注册</a>一个吧。</span>
				</div>
				
				<div class="right-div">
					<img src="/images/1.png" />
				</div>
			</main>
			
			<footer>
				<div class="footer-links">
					<a href="javascript:openApi('https://github.com/laozhi-1993/weiw-server')">
						<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
							<path d="M298.285714 772.571429q-4.571429 5.142857-11.428571-1.714286-7.428571-6.285714-2.285714-10.857143 4.571429-5.142857 11.428571 1.714286 6.857143 6.285714 2.285714 10.857143z m-24-34.857143q5.142857 6.857143 0 10.857143-4.571429 3.428571-9.714285-4t0-10.285715q5.142857-4 9.714285 3.428572z m-34.857143-34.285715q-2.857143 4-7.428571 1.142858-5.714286-2.857143-4-6.857143 1.714286-2.857143 7.428571-1.142857 5.714286 2.857143 4 6.857142z m17.714286 19.428572q-3.428571 4-9.142857-1.714286-5.142857-6.285714-1.142857-9.142857 3.428571-3.428571 9.142857 1.714286 5.142857 6.285714 1.142857 9.142857z m73.714286 64q-2.285714 6.857143-10.857143 3.428571-9.714286-2.285714-7.428571-8.571428t10.857142-4q9.142857 2.857143 7.428572 9.142857z m36 2.857143q0 6.285714-9.142857 6.285714-9.714286 1.142857-9.714286-6.285714 0-6.285714 9.142857-6.285715 9.714286-1.142857 9.714286 6.285715z m33.142857-5.714286q1.142857 5.714286-8 8t-10.285714-4.571429 8-8.571428q9.142857-1.142857 10.285714 5.142857z m550.857143-546.285714v548.571428q0 68-48.285714 116.285715T786.285714 950.857143h-128q-9.142857 0-14-0.571429t-11.142857-2.857143-9.142857-8.285714-2.857143-15.714286v-136.571428q0-55.428571-29.714286-81.142857 32.571429-3.428571 58.571429-10.285715t53.714286-22.285714 46.285714-38 30.285714-60T792 489.142857q0-69.142857-45.142857-117.714286 21.142857-52-4.571429-116.571428-16-5.142857-46.285714 6.285714t-52.571429 25.142857l-21.714285 13.714286q-53.142857-14.857143-109.714286-14.857143t-109.714286 14.857143q-9.142857-6.285714-24.285714-15.428571T330.285714 262.571429 281.142857 254.857143q-25.142857 64.571429-4 116.571428-45.142857 48.571429-45.142857 117.714286 0 48.571429 11.714286 85.714286t30 60 46 38.285714 53.714285 22.285714 58.571429 10.285715q-22.857143 20.571429-28 58.857143-12 5.714286-25.714286 8.571428t-32.571428 2.857143-37.428572-12.285714T276.571429 728q-10.857143-18.285714-27.714286-29.714286t-28.285714-13.714285l-11.428572-1.714286q-12 0-16.571428 2.571428t-2.857143 6.571429 5.142857 8 7.428571 6.857143l4 2.857143q12.571429 5.714286 24.857143 21.714285t18 29.142858l5.714286 13.142857q7.428571 21.714286 25.142857 35.142857t38.285714 17.142857 39.714286 4 31.714286-2l13.142857-2.285714q0 21.714286 0.285714 58.857143t0.285714 38.857142q0 12.571429-6.285714 19.142858t-12.571428 7.428571-18.857143 0.857143H237.714286q-68 0-116.285715-48.285714T73.142857 786.285714V237.714286q0-68 48.285714-116.285715T237.714286 73.142857h548.571428q68 0 116.285715 48.285714T950.857143 237.714286z" fill="#fff"></path>
						</svg>
						<span>weiw-server</span>
					</a>
					<span>|</span>
					<a href="javascript:openApi('https://github.com/laozhi-1993/weiw-launcher')">
						<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
							<path d="M298.285714 772.571429q-4.571429 5.142857-11.428571-1.714286-7.428571-6.285714-2.285714-10.857143 4.571429-5.142857 11.428571 1.714286 6.857143 6.285714 2.285714 10.857143z m-24-34.857143q5.142857 6.857143 0 10.857143-4.571429 3.428571-9.714285-4t0-10.285715q5.142857-4 9.714285 3.428572z m-34.857143-34.285715q-2.857143 4-7.428571 1.142858-5.714286-2.857143-4-6.857143 1.714286-2.857143 7.428571-1.142857 5.714286 2.857143 4 6.857142z m17.714286 19.428572q-3.428571 4-9.142857-1.714286-5.142857-6.285714-1.142857-9.142857 3.428571-3.428571 9.142857 1.714286 5.142857 6.285714 1.142857 9.142857z m73.714286 64q-2.285714 6.857143-10.857143 3.428571-9.714286-2.285714-7.428571-8.571428t10.857142-4q9.142857 2.857143 7.428572 9.142857z m36 2.857143q0 6.285714-9.142857 6.285714-9.714286 1.142857-9.714286-6.285714 0-6.285714 9.142857-6.285715 9.714286-1.142857 9.714286 6.285715z m33.142857-5.714286q1.142857 5.714286-8 8t-10.285714-4.571429 8-8.571428q9.142857-1.142857 10.285714 5.142857z m550.857143-546.285714v548.571428q0 68-48.285714 116.285715T786.285714 950.857143h-128q-9.142857 0-14-0.571429t-11.142857-2.857143-9.142857-8.285714-2.857143-15.714286v-136.571428q0-55.428571-29.714286-81.142857 32.571429-3.428571 58.571429-10.285715t53.714286-22.285714 46.285714-38 30.285714-60T792 489.142857q0-69.142857-45.142857-117.714286 21.142857-52-4.571429-116.571428-16-5.142857-46.285714 6.285714t-52.571429 25.142857l-21.714285 13.714286q-53.142857-14.857143-109.714286-14.857143t-109.714286 14.857143q-9.142857-6.285714-24.285714-15.428571T330.285714 262.571429 281.142857 254.857143q-25.142857 64.571429-4 116.571428-45.142857 48.571429-45.142857 117.714286 0 48.571429 11.714286 85.714286t30 60 46 38.285714 53.714285 22.285714 58.571429 10.285715q-22.857143 20.571429-28 58.857143-12 5.714286-25.714286 8.571428t-32.571428 2.857143-37.428572-12.285714T276.571429 728q-10.857143-18.285714-27.714286-29.714286t-28.285714-13.714285l-11.428572-1.714286q-12 0-16.571428 2.571428t-2.857143 6.571429 5.142857 8 7.428571 6.857143l4 2.857143q12.571429 5.714286 24.857143 21.714285t18 29.142858l5.714286 13.142857q7.428571 21.714286 25.142857 35.142857t38.285714 17.142857 39.714286 4 31.714286-2l13.142857-2.285714q0 21.714286 0.285714 58.857143t0.285714 38.857142q0 12.571429-6.285714 19.142858t-12.571428 7.428571-18.857143 0.857143H237.714286q-68 0-116.285715-48.285714T73.142857 786.285714V237.714286q0-68 48.285714-116.285715T237.714286 73.142857h548.571428q68 0 116.285715 48.285714T950.857143 237.714286z" fill="#fff"></path>
						</svg>
						<span>weiw-launcher</span>
					</a>
					<span>|</span>
					<a href="javascript:openApi('https://space.bilibili.com/25792030')">
						<svg viewBox="0 0 1129 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
							<path d="M234.908525 9.656195a80.468288 80.468288 0 0 1 68.398044 0 167.374038 167.374038 0 0 1 41.84351 30.577949l160.936576 140.819503H621.156306L782.092881 40.234144a168.983404 168.983404 0 0 1 41.84351-30.577949 80.468288 80.468288 0 0 1 107.022823 66.788678 80.468288 80.468288 0 0 1-17.703024 53.913753 449.817728 449.817728 0 0 1-35.406046 32.187315 232.553351 232.553351 0 0 1-22.531121 18.507706h100.58536a170.59277 170.59277 0 0 1 118.288383 53.10907A171.397453 171.397453 0 0 1 1128.106519 352.4511v462.692655a325.896565 325.896565 0 0 1-4.023415 70.00741 178.639599 178.639599 0 0 1-80.468288 112.655603 173.006819 173.006819 0 0 1-92.53853 25.749852H212.377404a341.18554 341.18554 0 0 1-72.421459-4.023415 177.834916 177.834916 0 0 1-111.046237-80.468287A172.202136 172.202136 0 0 1 1.550491 846.526387V388.66183A360.497929 360.497929 0 0 1 1.550491 321.873151a177.030233 177.030233 0 0 1 160.936575-143.233552h105.413457c-16.89834-12.070243-31.382632-26.554535-46.671607-39.429461a80.468288 80.468288 0 0 1-25.749852-65.983996A80.468288 80.468288 0 0 1 234.908525 9.656195M216.400819 321.873151a80.468288 80.468288 0 0 0-63.569948 57.937167 108.632188 108.632188 0 0 0 0 30.577949v380.615001a80.468288 80.468288 0 0 0 55.523119 80.468288 106.21814 106.21814 0 0 0 34.601364 5.63278h654.207179a80.468288 80.468288 0 0 0 76.444873-47.47629 112.655603 112.655603 0 0 0 8.046829-53.10907v-354.060465a135.186723 135.186723 0 0 0 0-38.624779 80.468288 80.468288 0 0 0-52.304387-54.718435 129.553943 129.553943 0 0 0-49.890338-7.242146H254.220914a268.764081 268.764081 0 0 0-37.820095 0z m0 0" fill="#fff"></path>
							<path d="M348.368811 447.40368a80.468288 80.468288 0 0 1 55.523118 18.507706 80.468288 80.468288 0 0 1 28.163901 59.546533v80.468287a80.468288 80.468288 0 0 1-16.093658 51.499705 80.468288 80.468288 0 0 1-131.967992-9.656195 104.608774 104.608774 0 0 1-10.460877-54.718436v-80.468287a80.468288 80.468288 0 0 1 70.00741-67.593362z m416.021047 0a80.468288 80.468288 0 0 1 86.101068 75.64019v80.468288a94.147897 94.147897 0 0 1-12.070243 53.10907 80.468288 80.468288 0 0 1-132.772675 0 95.757262 95.757262 0 0 1-12.874926-57.132485v-80.468287a80.468288 80.468288 0 0 1 70.00741-70.812093z m0 0" fill="#fff"></path>
						</svg>
						<span>联系开发者</span>
					</a>
				</div>
				<p>© 2025 laozhi</p>
			</footer>
		</section>
		
		<script>
			function error(text)
			{
				document.getElementById('error').textContent = text;
			}
			
			function login()
			{
				const baseUrl = '/weiw/index.php?mods=mc_login&';
				const params = new URLSearchParams({
					name: document.getElementById('name').value,
					password: document.getElementById('password').value
				});
				
				fetch(baseUrl+params.toString())
					.then(response => {
						if (!response.ok) {
							throw new Error('Network response was not ok ' + response.statusText);
						}
						return response.json();
					})
					.then(data => {
						if(data.success == "ok")
						{
							window.location.replace('index.php');
						}
						else
						{
							error(data.error);
						}
					})
					.catch(error => {
						console.error(error);
					});
			}
		</script>
	</body>
</html>